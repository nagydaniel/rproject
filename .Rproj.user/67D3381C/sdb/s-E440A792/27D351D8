{
    "contents" : "<!--head\nTitle:        ANOVA Template\nAuthor:       Aleksandar Blagotić\nDescription:  An ANOVA report with table of descriptives, diagnostic tests and ANOVA-specific statistics.\nPackages:     nortest\nData required: TRUE\nExample:      rapport(\"anova\", ius2008, resp = \"leisure\", fac = \"gender\")  # one-way\n              rapport(\"anova\", ius2008, resp = \"leisure\", fac = c(\"gender\", \"partner\")) # two-way\n\nresp     | *numeric     | Response variable  | Dependent (response) variable\nfac      | *factor[1,2] | Factor variables   | Independent variables (factors)\nfac.intr | TRUE         | Factor interaction | Include factor interaction\nhead-->\n\n<%=\nd <- structure(data.frame(resp, fac), .Names = c(resp.iname, fac.name))\nf.int <- fml(resp.iname, fac.name, join.right = \"*\")\nf.nonint <- fml(resp.iname, fac.name, join.right = \"+\")\nfit <- lm(ifelse(fac.intr, f.int, f.nonint), data = d)\nfac.plu <- switch(fac.ilen, '', 's')\n%>\n\n# Introduction\n\n**Analysis of Variance** or **ANOVA** is a statistical procedure that tests equality of means for several samples. It was first introduced in 1921 by famous English statistician Sir Ronald Aylmer Fisher.\n\n# Model Overview\n\n<%= switch(fac.ilen, 'One', 'Two') %>-Way ANOVA was carried out, with <%= p(fac.label) %> as independent variable<%= fac.plu %>, and <%= p(resp.label) %> as a response variable. Factor interaction was<%= ifelse(fac.intr, \"\", \"n't\")%> taken into account.\n\n# Descriptives\n\nIn order to get more insight on the model data, a table of frequencies for ANOVA factors is displayed, as well as a table of descriptives.\n\n## Frequency Table\n\nBelow lies a frequency table for factors in ANOVA model. Note that the missing values are removed from the summary.\n\n<%=\n(freq <- rp.freq(fac.name, rp.data))\n%>\n\n## Descriptive Statistics\n\nThe following table displays the descriptive statistics of ANOVA model. Factor levels and/or their combinations lie on the left hand side, while the corresponding statistics for response variable are given on the right-hand side.\n\n<%=\n(desc <- rp.desc(resp, fac, c(Min = min, Max = max, Mean = mean, Std.Dev. = sd, Median = median, IQR, Skewness = skewness, Kurtosis = kurtosis)))\n%>\n\n# Diagnostics\n\nBefore we carry out ANOVA, we'd like to check some basic assumptions. For those purposes, normality and homoscedascity tests are carried out alongside several graphs that may help you with your decision on model's main assumptions.\n\n## Diagnostics\n\n### Univariate Normality\n\nWe will use _Shapiro-Wilk_, _Lilliefors_ and _Anderson-Darling_ tests to screen departures from normality in the response variable (<%= p(resp.label) %>).\n\n<%=\nif (length(resp) < 5000) {\n    ntest <- htest(resp, shapiro.test, lillie.test, ad.test)\n} else {\n    ntest <- htest(resp, lillie.test, ad.test)\n}\nntest\n%>\n\n\nAs you can see, applied tests <%= ifelse(all(ntest$p < .05), \"confirm departures from normality\", \"yield different results on hypotheses of normality, so you may want to stick with one you find most appropriate or you trust the most.\") %>.\n\n### Homoscedascity\n\nIn order to test homoscedascity, _Bartlett_ and _Fligner-Kileen_ tests are applied.\n\n<%=\nhsced <- with(d, htest(as.formula(f.nonint), fligner.test, bartlett.test))\nhp <- hsced$p\nhcons <- all(hp < .05) | all(hp > .05)\nhp.all <- all(hp < .05)\nhsced\n%>\n\n\nWhen it comes to equality of variances, applied tests yield <%= ifelse(hcons, \"consistent\", \"inconsistent\") %> results. <%= if (hcons) sprintf(\"Homoscedascity assumption is %s.\", ifelse(hp.all, \"rejected\", \"confirmed\")) else sprintf(\"While _Fligner-Kileen test_ %s the hypotheses of homoscedascity, _Bartlett's test_ %s it.\", ifelse(hp[1] < .05, \"rejected\", \"confirmed\"), ifelse(hp[2] < .05, \"rejected\", \"confirmed\")) %>\n\n## Diagnostic Plots\n\nHere you can see several diagnostic plots for ANOVA model:\n\n - residuals against fitted values\n - scale-location plot of square root of residuals against fitted values\n - normal Q-Q plot\n - residuals against leverages\n\n<%=\npar(mfrow = c(2, 2))\n+plot(fit)\n%>\n\n# ANOVA Summary\n\n## ANOVA Table\n\n<%=\na <- anova(fit)\na.f <- a$F\na.p <- a$Pr\na.fp <- a.p < .05\ndata.frame(a)\n%>\n\n_F-test_ for <%= p(fac.label[1]) %> is <%= ifelse(a.fp[1], \"\", \"not\") %> statistically significant, which implies that there is <%= ifelse(a.fp[1], \"an\", \"no\") %> <%= fac.label[1] %> effect on response variable. <%= if (fac.ilen == 2) sprintf(\"Effect of %s on response variable is %s significant. \", p(fac.label[2]), ifelse(a.fp[2], \"\", \"not\")) else \"\" %><%= if (fac.ilen == 2 & fac.intr) sprintf(\"Interaction between levels of %s %s found significant (p = %.3f).\", p(fac.label), ifelse(a.fp[3], \"was\", \"wasn't\"), a.p[3]) else \"\" %>\n",
    "created" : 1372077499327.000,
    "dirty" : true,
    "encoding" : "UTF-8",
    "folds" : "",
    "hash" : "1033012552",
    "id" : "27D351D8",
    "lastKnownWriteTime" : 1346106288,
    "path" : "C:/gyakornoki munka/saját template-ek/anova gyakorláshoz.tpl",
    "properties" : {
    },
    "source_on_save" : false,
    "type" : "text"
}